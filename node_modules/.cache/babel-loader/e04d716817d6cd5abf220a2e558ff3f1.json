{"ast":null,"code":"import _regeneratorRuntime from\"/home/laboratoria143-am/Escritorio/Laboratoria/CDMX009-BurgerQueen/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/laboratoria143-am/Escritorio/Laboratoria/CDMX009-BurgerQueen/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/home/laboratoria143-am/Escritorio/Laboratoria/CDMX009-BurgerQueen/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/laboratoria143-am/Escritorio/Laboratoria/CDMX009-BurgerQueen/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/laboratoria143-am/Escritorio/Laboratoria/CDMX009-BurgerQueen/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import breakfastData from'../../data/breakfastData';import restOfTheDayData from'../../data/restOfTheDayData';import MenuElement from'./MenuElement';import ToggleMenu from'./ToggleMenu';import OrderItem from'./OrderItem';import Titles from'./Titles';import Table from'./Table';import Button from'../Button';import{v4 as uuidv4}from'uuid';import{toast,Slide}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{db}from'../../firebase';import{AuthContext}from'../../Auth';import'./index.css';toast.configure();function MenuSelector(){var user=useContext(AuthContext);var currentWaiter=user.currentUser.displayName;//  nodes \nvar initialValues={table:'',items:[],waiter:currentWaiter,date:new Date(),status:'in progress'};var _useState=useState('breakfast'),_useState2=_slicedToArray(_useState,2),tab=_useState2[0],setTab=_useState2[1];var _useState3=useState(initialValues),_useState4=_slicedToArray(_useState3,2),order=_useState4[0],setOrder=_useState4[1];// functions \nvar setTable=function setTable(table){table=parseInt(table);setOrder(_objectSpread(_objectSpread({},order),{},{table:table}));};var addProduct=function addProduct(product){if(order.items.find(function(item){return item.id===product.id;})){// order.items.map( item => item.id === product.id )\n}else{setOrder(_objectSpread(_objectSpread({},order),{},{items:[].concat(_toConsumableArray(order.items),[_objectSpread(_objectSpread({},product),{},{quantity:1})])}));}};var deleteItem=function deleteItem(id){setOrder(_objectSpread(_objectSpread({},order),{},{items:order.items.filter(function(order){return order.id!==id;})}));};var addQuantity=function addQuantity(id,quantity){var newItems=order.items.map(function(item){if(item.id===id){return _objectSpread(_objectSpread({},item),{},{quantity:quantity});}else{return item;}});setOrder(_objectSpread(_objectSpread({},order),{},{items:newItems}));};var addTotal=order.items.reduce(function(result,item){return result+item.price*item.quantity;},0);var saveOrder=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(order.items.length>0&&order.table<=0)){_context.next=4;break;}toast.warn('Por favor asigna la mesa',{className:\"rounder-edges\",position:\"top-center\",autoClose:4000,hideProgressBar:true,transition:Slide});_context.next=16;break;case 4:if(!(order.items.length===0&&order.table>=1)){_context.next=8;break;}toast.warn('Agrega al menos un producto a la orden üçî',{className:\"rounder-edges\",position:\"top-center\",autoClose:4000,hideProgressBar:true,transition:Slide});_context.next=16;break;case 8:if(!(order.items.length===0&&order.table<=0)){_context.next=12;break;}toast.warn('Asigna la mesa y productos a la orden üçîüçü',{className:\"rounder-edges\",position:\"top-center\",autoClose:4000,hideProgressBar:true,transition:Slide});_context.next=16;break;case 12:_context.next=14;return db.collection('orders').add(order);case 14:setOrder(_objectSpread({},initialValues));toast.success('Pedido enviado a cocina! ‚ú®',{className:\"rounder-edges\",position:\"top-center\",autoClose:4000,hideProgressBar:true,transition:Slide});case 16:case\"end\":return _context.stop();}}},_callee);}));return function saveOrder(){return _ref.apply(this,arguments);};}();// prints the lunch components \nvar restOtdComponents=restOfTheDayData.map(function(elem){return/*#__PURE__*/React.createElement(MenuElement,{addProduct:addProduct,data:elem,key:elem.id});});// prints the breakfast components\nvar breakfastComponents=breakfastData.map(function(elem){return/*#__PURE__*/React.createElement(MenuElement,{addProduct:addProduct,data:elem,key:elem.id});});return/*#__PURE__*/React.createElement(\"div\",{className:\"menu-parent\"},/*#__PURE__*/React.createElement(\"div\",{className:\"menu-container\"},/*#__PURE__*/React.createElement(ToggleMenu,{className:\"toggle-btn\",setTab:setTab,tab:tab}),tab==='breakfast'?/*#__PURE__*/React.createElement(\"div\",{className:\"items-container\"},breakfastComponents):/*#__PURE__*/React.createElement(\"div\",{className:\"items-container\"},restOtdComponents)),/*#__PURE__*/React.createElement(\"div\",{className:\"order-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"order-note\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table\"},/*#__PURE__*/React.createElement(Table,{setTable:setTable})),/*#__PURE__*/React.createElement(Titles,null),order.items.length===0?/*#__PURE__*/React.createElement(\"div\",{className:\"center-align\"},\" No hay productos en la orden\"):order.items.map(function(elem){return/*#__PURE__*/React.createElement(OrderItem,{item:elem.item,price:elem.price,totalp:elem.price*elem.quantity,key:uuidv4(),id:elem.id,quantity:elem.quantity,deleteItem:deleteItem,addQuantity:addQuantity});}),/*#__PURE__*/React.createElement(\"p\",{className:\"total\"},\"Total: $\",addTotal,\".00\"),/*#__PURE__*/React.createElement(\"div\",{className:\"center\"},/*#__PURE__*/React.createElement(Button,{color:'yellow',title:\"Enviar a cocina\",saveOrder:saveOrder})))));}export default MenuSelector;","map":{"version":3,"sources":["/home/laboratoria143-am/Escritorio/Laboratoria/CDMX009-BurgerQueen/my-app/src/components/MenuSelector/index.js"],"names":["React","useState","useContext","breakfastData","restOfTheDayData","MenuElement","ToggleMenu","OrderItem","Titles","Table","Button","v4","uuidv4","toast","Slide","db","AuthContext","configure","MenuSelector","user","currentWaiter","currentUser","displayName","initialValues","table","items","waiter","date","Date","status","tab","setTab","order","setOrder","setTable","parseInt","addProduct","product","find","item","id","quantity","deleteItem","filter","addQuantity","newItems","map","addTotal","reduce","result","price","saveOrder","length","warn","className","position","autoClose","hideProgressBar","transition","collection","add","success","restOtdComponents","elem","breakfastComponents"],"mappings":"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","sourcesContent":["\nimport React, { useState, useContext } from 'react'\nimport breakfastData from '../../data/breakfastData'\nimport restOfTheDayData from '../../data/restOfTheDayData'\nimport MenuElement from './MenuElement'\nimport ToggleMenu from './ToggleMenu'\nimport OrderItem from './OrderItem'\nimport Titles from './Titles'\nimport Table from './Table'\nimport Button from '../Button'\nimport { v4 as uuidv4 } from 'uuid'\nimport { toast, Slide } from 'react-toastify'\nimport 'react-toastify/dist/ReactToastify.css'\nimport { db } from '../../firebase'\nimport { AuthContext } from '../../Auth'\nimport './index.css'\n\ntoast.configure()\n\nfunction MenuSelector() {\n\n    const user = useContext(AuthContext)\n    let currentWaiter = user.currentUser.displayName\n\n    //  nodes \n    const initialValues = {\n        table: '',\n        items: [],\n        waiter: currentWaiter,\n        date: new Date(), \n        status: 'in progress'\n    }\n\n    const [tab, setTab] = useState('breakfast')\n    const [order, setOrder] = useState(initialValues)\n\n    // functions \n    const setTable = (table) => { \n        table = parseInt(table)\n        setOrder({ ...order, table })\n    }\n\n    const addProduct = (product) => {\n        if (order.items.find(item => item.id === product.id)) {\n           // order.items.map( item => item.id === product.id )\n        } else{\n            setOrder({\n                ...order,\n                items: [\n                    ...order.items,\n                    {...product, quantity: 1}\n                ]\n            })\n        }\n    }\n\n    const deleteItem = (id) => {\n        setOrder({\n            ...order,\n            items: order.items.filter(order => order.id !== id )            \n        })\n    }\n\n    const addQuantity = (id, quantity) => {\n        const newItems = order.items.map((item) => {\n            if (item.id === id) {\n                return {\n                    ...item,\n                    quantity,\n                }\n            } else {\n                return item\n            }\n        })\n        setOrder({\n            ...order,\n            items: newItems,\n        })\n    }\n\n    const addTotal = order.items.reduce((result, item) => {\n        return result + item.price * item.quantity\n    }, 0)\n\n    const saveOrder = async() =>{\n        if(order.items.length >0 && order.table <= 0){\n            toast.warn('Por favor asigna la mesa', {\n                className: \"rounder-edges\",\n                position: \"top-center\",\n                autoClose: 4000,\n                hideProgressBar: true,\n                transition: Slide\n                });\n        }else if(order.items.length === 0 && order.table >= 1){\n            toast.warn('Agrega al menos un producto a la orden üçî', {\n                className: \"rounder-edges\",\n                position: \"top-center\",\n                autoClose: 4000,\n                hideProgressBar: true,\n                transition: Slide\n                });\n        }else if (order.items.length === 0 && order.table <= 0){\n            toast.warn('Asigna la mesa y productos a la orden üçîüçü', {\n                className: \"rounder-edges\",\n                position: \"top-center\",\n                autoClose: 4000,\n                hideProgressBar: true,\n                transition: Slide\n                });\n        }else{\n            await db\n            .collection('orders')\n            .add(order)\n            setOrder({...initialValues})\n            toast.success('Pedido enviado a cocina! ‚ú®', {\n                className: \"rounder-edges\",\n                position: \"top-center\",\n                autoClose: 4000,\n                hideProgressBar: true,\n                transition: Slide\n                });\n        }\n    }\n\n    // prints the lunch components \n    const restOtdComponents = restOfTheDayData.map(elem =>\n        <MenuElement addProduct={addProduct} data={elem} key={elem.id} />\n    )\n    \n    // prints the breakfast components\n    const breakfastComponents = breakfastData.map(elem =>\n        <MenuElement addProduct={addProduct} data={elem} key={elem.id}/>\n    )\n\n    return(\n    <div className=\"menu-parent\">\n       <div className=\"menu-container\" >\n        <ToggleMenu \n            className=\"toggle-btn\" \n            setTab={setTab} \n            tab={tab}\n        />\n\n        {tab === 'breakfast' ? <div className=\"items-container\">{breakfastComponents}</div> :\n            <div className=\"items-container\">{restOtdComponents}</div>\n        }\n       </div> \n\n        <div className=\"order-container\">\n        <div className=\"order-note\">\n            <div className=\"table\">\n                <Table setTable={setTable} />\n            </div> \n            <Titles /> \n            { order.items.length === 0 ? ( <div className=\"center-align\"> No hay productos en la orden</div> ) : ( order.items.map(elem =>\n                <OrderItem\n                    item={elem.item} \n                    price={elem.price} \n                    totalp={elem.price * elem.quantity}\n                    key={uuidv4()} \n                    id={elem.id} \n                    quantity={elem.quantity}\n                    deleteItem={deleteItem} \n                    addQuantity={addQuantity} \n                />\n            ) )}\n            <p className=\"total\">Total: ${addTotal}.00</p>\n            <div className=\"center\">\n                <Button \n                color={'yellow'}\n                title={\"Enviar a cocina\"}\n                saveOrder={saveOrder}\n            />\n            </div>\n        </div>\n        </div>\n    </div> \n    )\n}\n\nexport default MenuSelector"]},"metadata":{},"sourceType":"module"}